version: '3'
services:
  front:
    image: parkseyun/howdoilook:front
    ports:
      - "81:80"
    depends_on:
      - back

  back:
    image: parkseyun/howdoilook:back
    ports:
      - "8081:8080"
    environment:
      SPRING_DATASOURCE_URL: jdbc:mysql://<EC2_IP_ADDRESS>:3306/howdoilook?serverTimezone=Asia/Seoul
      SPRING_DATASOURCE_USERNAME: howdoilook
      SPRING_DATASOURCE_PASSWORD: 6how6do6i6look6

  mysql:
    image: mysql:8.0.33
    container_name: mysql
    ports:
      - 3306:3306
    environment:
      MYSQL_ROOT_PASSWORD: 6how6do6i6look6
      MYSQL_DATABASE: howdoilook
      MYSQL_USER: howdoilook
      MYSQL_PASSWORD: 6how6do6i6look6

# 다른 서비스들의 주석 처리는 유지합니다.

#  redis_container:
#    image: redis:latest
#
#    container_name: redis_test
#
#    ports:
#      - 6000:6379
#
## 스토리지 마운트(볼륨) 설정
#    volumes:
#      - ./redis/data:/data
#      - ./redis/conf/redis.conf:/usr/local/conf/redis.conf
#
## 컨테이너에 docker label을 이용하여 메타 데이터 추가
#    labels:
#      - "name=redis"
#      - "mode=standalone"
#
#
## 컨테이너 종료 시 재 시작 여부 설정
#    restart:
#      always
#
#    command:
#      redis-server /usr/local/conf/redis.conf
#
#  nginx:
#    image: nginx:latest
#    ports:
#      - "8080:80"
